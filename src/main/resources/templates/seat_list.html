<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>좌석 및 예약 설정</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
<link rel="stylesheet" type="text/css" href="./css/head_menu.css">
<link rel="stylesheet" type="text/css" href="./css/seat_list.css">
</head>
<body>
 <!-- 메인 컨테이너 -->
    <div class="container">
        <div th:replace="admin_header :: header"></div>
    
        <div th:replace="admin_menu :: menu"></div>
        
        <div class="content">
            <h2 class="section-title">좌석 및 예약관리</h2>
            
            <!-- 검색 섹션 -->
            <div class="search-section">
                <div class="search-info">미설정 항공코드 0건 | 설정 완료 항공코드 0건</div>
                <div class="search-form">
                    <select class="search-select" id="searchType">
                        <option value="airport">출발지</option>
                        <option value="airline">도착지</option>
                    </select>
                    <input type="text" class="search-input" id="searchKeyword" placeholder="항공편 단어를 입력하세요">
                    <button type="button" class="btn-search" onclick="searchFlights()">검색</button>
                </div>
            </div>
            
            <!-- 데이터 테이블 -->
            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th style="width: 100px;">공항코드</th>
                            <th style="width: 150px;">항공사명</th>
                            <th style="width: 100px;">항공코드</th>
                            <th style="width: 120px;">항공편명</th>
                            <th style="width: 80px;">출발지</th>
                            <th style="width: 80px;">도착지</th>
                            <th style="width: 100px;">좌석형태</th>
                            <th style="width: 80px;">좌석수</th>
                            <th style="width: 120px;">예약 시작일</th>
                            <th style="width: 120px;">예약 종료일</th>
                            <th style="width: 80px;">1인 금액</th>
                        </tr>
                    </thead>
                    <tbody id="dataTableBody">
                        <tr>
                            <td colspan="11" class="no-data">검색된 항공편이 없습니다.</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <!-- 하단 액션 버튼 -->
            <div class="bottom-actions">
                <button type="button" class="btn-regi" onclick="regi_complete()">등록 완료</button>
            </div>
            
        </div>
    </div>
<div th:replace="admin_footer :: footer"></div>

    <script>
    
 // 메뉴 활성화 스크립트
    document.addEventListener('DOMContentLoaded', function() {
        const currentPath = window.location.pathname;
        const menuItems = document.querySelectorAll('.menu-item');
        
        // 모든 메뉴에서 active 클래스 제거
        menuItems.forEach(item => {
            item.classList.remove('active');
        });
        
        // 항공편 관리 메뉴 활성화
        menuItems.forEach(item => {
            const href = item.getAttribute('href');
            
            if (href === '/seat_list' || href.includes('seat')) {
                item.classList.add('active');
            }
        });
    });
 
        // 검색 기능
        function searchFlights() {
            const searchType = document.getElementById('searchType').value;
            const searchKeyword = document.getElementById('searchKeyword').value;
            
            console.log('검색 타입:', searchType, '검색어:', searchKeyword);
            
            // 실제 검색 로직 구현
            if (searchKeyword.trim() === '') {
                alert('검색어를 입력해주세요.');
                return;
            }
            
            // 여기서 서버에 검색 요청을 보내고 결과를 테이블에 표시
            loadSearchResults(searchType, searchKeyword);
        }

        // 검색 결과 로드 (예시)
        function loadSearchResults(searchType, keyword) {
            // 실제로는 서버에서 데이터를 가져옴
            const sampleData = [
                // 검색 결과가 있다면 여기에 표시될 예정
            ];
            
            const tableBody = document.getElementById('dataTableBody');
            
            if (sampleData.length === 0) {
                tableBody.innerHTML = '<tr><td colspan="11" class="no-data">검색된 항공편이 없습니다.</td></tr>';
            } else {
                // 실제 데이터 표시 로직
                let html = '';
                sampleData.forEach(item => {
                    html += `
                        <tr>
                            <td>${item.airportCode}</td>
                            <td>${item.airlineName}</td>
                            <td>${item.airlineCode}</td>
                            <td>${item.flightNumber}</td>
                            <td>${item.departure}</td>
                            <td>${item.arrival}</td>
                            <td>${item.seatStatus}</td>
                            <td>${item.totalSeats}</td>
                            <td>${item.reservationStart}</td>
                            <td>${item.reservationEnd}</td>
                            <td>${item.price.toLocaleString()}원</td>
                        </tr>
                    `;
                });
                tableBody.innerHTML = html;
            }
        }

        // 엔터 키로 검색
        document.getElementById('searchKeyword').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchFlights();
            }
        });

        // 등록항공 버튼 클릭
        function downloadExcel() {
            console.log('등록항공 처리');
            // 실제 등록 로직 구현
            alert('등록항공 기능을 구현해주세요.');
        }

        // 네비게이션 메뉴 클릭 이벤트
        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', function(e) {
                e.preventDefault();
                
                // 기존 active 클래스 제거
                document.querySelectorAll('.nav-item').forEach(nav => {
                    nav.classList.remove('active');
                });
                
                // 클릭된 메뉴에 active 클래스 추가
                this.classList.add('active');
                
                console.log('메뉴 클릭:', this.textContent);
            });
        });

        // 페이지 로드 시 초기화
        window.addEventListener('load', function() {
            console.log('좌석 및 예약관리 페이지 로드됨');
        });
    </script>
</body>
</html>