<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>관리자 메인</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
<link rel="stylesheet" type="text/css" href="./css/admin_list.css">
</head>
<body>
<div class="container">
    <div th:replace="admin_header :: header"></div>
    
    <div th:replace="admin_menu :: menu"></div>
    
    <!-- 메인 콘텐츠 -->
    <div class="content">
        <h2 class="section-title">신규등록 관리자</h2>
        
        <table class="admin-table">
            <thead>
                <tr>
                    <th>NO</th>
                    <th>관리자명</th>
                    <th>아이디</th>
                    <th>전화번호</th>
                    <th>이메일</th>
                    <th>담당부서</th>
                    <th>담당직책</th>
                    <th>가입일자</th>
                    <th>승인여부</th>
                </tr>
            </thead>
            <tbody>
                <!-- 데이터가 없을 때 -->
                <tr th:if="${#lists.isEmpty(adminList)}">
                    <td colspan="9" class="no-data">신규 등록된 관리자가 없습니다.</td>
                </tr>
                
                <!-- 관리자 목록 -->
                <tr th:each="admin, iterStat : ${adminList}">
                    <td th:text="${iterStat.count}">1</td>
                    <td th:text="${admin.name}">한석봉</td>
                    <td th:text="${admin.userId}">hansbong</td>
                    <td th:text="${admin.phoneNumber}">01012345678</td>
                    <td th:text="${admin.email}">hansbong@hanmail.net</td>  
                    <td th:text="${admin.department}">디자인팀</td>
                    <td th:text="${admin.position}">주임</td>
                    <td th:text="${admin.joinDate}">2022-08-12</td>
                    <td>
                        <button class="btn-small btn-approve" th:onclick="'approveAdmin(' + ${admin.id} + ')'">승인</button>
                        <button class="btn-small btn-reject" th:onclick="'rejectAdmin(' + ${admin.id} + ')'">미승인</button>
                    </td>
                </tr>
            </tbody>
        </table>

    </div>
</div>

<script>
function approveAdmin(adminId) {
    if(confirm('관리자를 승인하시겠습니까?')) {
        // AJAX 요청 또는 폼 제출
        location.href = '/admin/approve/' + adminId;
    }
}

function rejectAdmin(adminId) {
    if(confirm('관리자 승인을 거부하시겠습니까?')) {
        // AJAX 요청 또는 폼 제출
        location.href = '/admin/reject/' + adminId;
    }
}
</script>
</body>
</html>